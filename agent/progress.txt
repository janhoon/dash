# Progress Log

This file tracks progress on the dash project features.

## Setup - Project Architecture & Foundation - 2026-02-02
- What was done:
  - Created Vue.js 3 frontend with TypeScript and Vite (port 5173)
  - Set up Vitest for frontend testing with happy-dom environment
  - Created Go backend with pgx PostgreSQL driver
  - Set up Go project structure: cmd/api, internal/handlers, internal/models, internal/db, pkg
  - Created docker-compose.yml with PostgreSQL and Prometheus services
  - Implemented database migrations for dashboards, panels, and data_sources tables
  - Added CORS middleware to Go API
  - Created GET /api/health endpoint returning 200 OK with JSON response
  - Added comprehensive .gitignore
  - Updated README.md with setup instructions
- Files changed:
  - frontend/ - entire Vue.js 3 project scaffolded
  - frontend/src/App.vue - simplified dashboard landing page
  - frontend/src/App.spec.ts - basic test for App component
  - frontend/vite.config.ts - added vitest configuration
  - frontend/package.json - added test and type-check scripts
  - backend/cmd/api/main.go - API server with graceful shutdown
  - backend/internal/handlers/health.go - health check handler
  - backend/internal/handlers/health_test.go - health check tests
  - backend/internal/db/db.go - database connection with pgx
  - backend/internal/db/migrations.go - schema migrations
  - docker-compose.yml - PostgreSQL and Prometheus services
  - prometheus.yml - Prometheus configuration
  - .gitignore - project-wide ignore rules
  - README.md - setup instructions
- Blockers/notes for next iteration:
  - None. Ready to proceed with Dashboard CRUD Operations.

## Core - Dashboard CRUD Operations - 2026-02-02
- What was done:
  - Created Dashboard model in Go (internal/models/dashboard.go)
  - Implemented full CRUD handlers for dashboards:
    - POST /api/dashboards (create with title, description, user_id)
    - GET /api/dashboards (list all dashboards)
    - GET /api/dashboards/{id} (get single dashboard)
    - PUT /api/dashboards/{id} (update title/description)
    - DELETE /api/dashboards/{id} (delete with 204 response)
  - Added google/uuid dependency for UUID parsing
  - Created frontend types (types/dashboard.ts)
  - Created API client (api/dashboards.ts) with fetch-based CRUD functions
  - Set up Vue Router with /dashboards route
  - Created DashboardList.vue component with:
    - Dashboard grid display
    - Loading/error/empty states
    - Create, edit, delete functionality
  - Created CreateDashboardModal.vue with form validation
  - Created EditDashboardModal.vue for updating dashboards
  - Added delete confirmation dialog
  - Updated App.vue to use RouterView
  - Added comprehensive tests (27 frontend tests, all passing)
- Files changed:
  - backend/internal/models/dashboard.go (new)
  - backend/internal/handlers/dashboards.go (new)
  - backend/internal/handlers/dashboards_test.go (new)
  - backend/cmd/api/main.go - added dashboard routes
  - backend/go.mod, go.sum - added google/uuid
  - frontend/src/types/dashboard.ts (new)
  - frontend/src/api/dashboards.ts (new)
  - frontend/src/api/dashboards.spec.ts (new)
  - frontend/src/components/DashboardList.vue (new)
  - frontend/src/components/DashboardList.spec.ts (new)
  - frontend/src/components/CreateDashboardModal.vue (new)
  - frontend/src/components/CreateDashboardModal.spec.ts (new)
  - frontend/src/components/EditDashboardModal.vue (new)
  - frontend/src/components/EditDashboardModal.spec.ts (new)
  - frontend/src/views/DashboardsView.vue (new)
  - frontend/src/router/index.ts (new)
  - frontend/src/main.ts - added router
  - frontend/src/App.vue - updated to use RouterView
  - frontend/src/App.spec.ts - updated for RouterView
  - frontend/package.json - added vue-router
- Blockers/notes for next iteration:
  - None. Ready to proceed with Panel System feature.

## Core - Panel System (Simple Container) - 2026-02-02
- What was done:
  - Created Panel model in Go (internal/models/panel.go) with GridPos struct
  - Implemented full CRUD handlers for panels:
    - POST /api/dashboards/{id}/panels (create panel with grid_pos)
    - GET /api/dashboards/{id}/panels (list panels for dashboard)
    - PUT /api/panels/{id} (update panel title, type, grid_pos, query)
    - DELETE /api/panels/{id} (delete with 204 response)
  - Panels table migration already existed from Sprint 1
  - Created frontend types (types/panel.ts) with GridPos interface
  - Created API client (api/panels.ts) with fetch-based CRUD functions
  - Created Panel.vue component:
    - Simple card with title header and content slot
    - Edit and delete action buttons
    - Placeholder for visualization content
  - Created PanelEditModal.vue:
    - Form for panel title, type (dropdown), and query (JSON)
    - JSON validation for query field
    - Works for both create and edit modes
  - Created DashboardDetailView.vue:
    - Displays dashboard with all panels
    - 12-column CSS grid layout based on grid_pos
    - Add Panel button with modal
    - Edit and delete panel actions with confirmation
    - Back navigation to dashboard list
  - Updated DashboardList.vue:
    - Made dashboard cards clickable to navigate to detail view
    - Added useRouter for navigation
  - Added /dashboards/:id route to Vue Router
  - Added comprehensive tests:
    - Backend: 10 tests for panel handlers (validation, UUID parsing, JSON)
    - Frontend: 22 new tests for panel API and components
    - All 49 frontend tests passing
    - All backend tests passing
- Files changed:
  - backend/internal/models/panel.go (new)
  - backend/internal/handlers/panels.go (new)
  - backend/internal/handlers/panels_test.go (new)
  - backend/cmd/api/main.go - added panel routes
  - frontend/src/types/panel.ts (new)
  - frontend/src/api/panels.ts (new)
  - frontend/src/api/panels.spec.ts (new)
  - frontend/src/components/Panel.vue (new)
  - frontend/src/components/Panel.spec.ts (new)
  - frontend/src/components/PanelEditModal.vue (new)
  - frontend/src/components/PanelEditModal.spec.ts (new)
  - frontend/src/views/DashboardDetailView.vue (new)
  - frontend/src/router/index.ts - added dashboard detail route
  - frontend/src/components/DashboardList.vue - made cards clickable
- Blockers/notes for next iteration:
  - None. Ready to proceed with Time Range Picker Component.

## UI - Time Range Picker Component - 2026-02-02
- What was done:
  - Created useTimeRange.ts composable with:
    - Reactive start/end timestamps calculation
    - All 7 preset ranges (5m, 15m, 30m, 1h, 6h, 24h, 7d)
    - Custom range support with date pickers
    - Auto-refresh with intervals (Off, 5s, 15s, 30s, 1m)
    - Shared state across components using the composable
    - onRefresh callback system for panel data refresh
  - Created TimeRangePicker.vue component with:
    - Dropdown UI for selecting time ranges
    - Quick range presets list with visual selection indicator
    - Custom range form with datetime-local inputs
    - Validation for custom ranges (start < end)
    - Refresh interval selector (dropdown)
    - Manual refresh button
    - Human-readable display text (e.g., "Last 5 minutes")
  - Integrated TimeRangePicker into DashboardDetailView:
    - Added to header alongside "Add Panel" button
    - Connected to useTimeRange composable for shared state
    - Set up refresh callback subscription for panel data updates
    - Proper cleanup on unmount
  - Added comprehensive tests:
    - 23 tests for useTimeRange composable
    - 13 tests for TimeRangePicker component
    - All 85 frontend tests passing
    - All backend tests passing
- Files changed:
  - frontend/src/composables/useTimeRange.ts (new)
  - frontend/src/composables/useTimeRange.spec.ts (new)
  - frontend/src/components/TimeRangePicker.vue (new)
  - frontend/src/components/TimeRangePicker.spec.ts (new)
  - frontend/src/views/DashboardDetailView.vue - integrated TimeRangePicker
- Blockers/notes for next iteration:
  - None. Ready to proceed with Prometheus Data Source Integration.
